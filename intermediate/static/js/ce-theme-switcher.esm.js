class t extends HTMLElement{constructor(){super(),this.darkModeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.supportsMediaColorScheme="not all"!==window.matchMedia("(prefers-color-scheme)").media,this.onClick=this.onClick.bind(this),this.systemQuery=this.systemQuery.bind(this)}static get observedAttributes(){return["value","text-on","text-off","text"]}get value(){return this.getAttribute("value")}set value(t){this.setAttribute("value",t)}get default(){return this.getAttribute("default")}get on(){return this.getAttribute("text-on")||"on"}set on(t){this.setAttribute("text-on",t)}get off(){return this.getAttribute("text-off")||"off"}set off(t){this.setAttribute("text-off",t)}get legend(){return this.getAttribute("text-legend")||"dark theme:"}set legend(t){this.setAttribute("text-legend",t)}attributeChangedCallback(t,e,s){switch(t){case"value":if(["true","false"].indexOf(s)<0){this.setAttribute("value",e);break}if("true"===s){localStorage.setItem("darkthemeswitcher","true"),this.state="true",this.button&&(this.button.setAttribute("aria-pressed","true"),this.span.innerText=this.on,this.html.classList.add("is-dark"),this.html.classList.remove("is-light"));break}if("false"===s){localStorage.setItem("darkthemeswitcher","false"),this.state="false",this.button&&(this.button.setAttribute("aria-pressed","false"),this.span.innerText=this.off,this.html.classList.add("is-light"),this.html.classList.remove("is-dark"));break}break;case"text-on":this.span&&"true"==this.state&&(this.span.innerText=s);break;case"text-off":this.span&&"false"==this.state&&(this.span.innerText=s);break;case"text-legend":this.button&&(this.button.innerText=s)}}connectedCallback(){this.html=document.documentElement,this.html.classList.remove("is-dark","is-light"),this.calcInitialState(),this.render(),this.value=this.state,this.supportsMediaColorScheme&&this.darkModeMediaQuery.addListener(this.systemQuery)}systemQuery(t){this.value=!0===t.matches?"true":"false"}disconnectedCallback(){this.button&&this.button.removeEventListener("click",this.onClick)}calcInitialState(){this.state=localStorage.getItem("darkthemeswitcher"),this.default||this.state?!this.default||this.state?this.state:this.value=this.default:this.supportsMediaColorScheme?(this.state=matchMedia("('prefers-color-scheme': 'light'),('prefers-color-scheme':'no-preference')").matches?"false":"true",this.value=this.state):(this.state="false",this.value="false")}onClick(){const t="false"===this.value?"true":"false";this.value=t,this.html.classList.remove("true"===t?"is-light":"is-dark"),this.html.classList.add("true"===t?"is-dark":"is-light"),this.dispatchEvent(new Event("change"))}render(){this.button||(this.button=document.createElement("button"),this.button.innerText=this.legend,this.button.setAttribute("tabindex",0),this.button.setAttribute("aria-pressed","true"==this.state?"true":"false"),this.span=document.createElement("span"),this.span.setAttribute("aria-hidden","true"),this.span.innerText="true"==this.state?this.on:this.off,this.button.appendChild(this.span),this.button.addEventListener("click",this.onClick),this.appendChild(this.button))}}customElements.get("dark-light-switch")||customElements.define("dark-light-switch",t);export{t as Switcher};
