const t=`dGrammatiko-${VERSION}`,e=["/index-top.html","/index-bottom.html","/offline.content.html","/offline.html","/manifest.json","/static/fonts/dgrammatiko.woff2","/static/fonts/Qw3PZQNVED7rKGKxtqIqX5E-AVSJrOCfjY46_LjQbMZhKSbpUVzEEQ.woff","/static/js/ce-theme-switcher.esm.js"];addEventListener("install",(a=>{skipWaiting(),a.waitUntil(async function(){const a=await caches.open(t);await a.addAll(e)}())})),addEventListener("activate",(e=>{e.waitUntil(async function(){const e=await caches.keys();await Promise.all(e.map((e=>{if(e!==t)return caches.delete(e)})))}())}));class a{constructor(){let t,e;this.readable=new ReadableStream({start(e){t=e},cancel(t){e.error(t)}}),this.writable=new WritableStream({start(t){e=t},write(e){t.enqueue(e)},close(){t.close()},abort(e){t.error(e)}})}}addEventListener("fetch",(e=>{const{request:n}=e;"only-if-cached"===n.cache&&"same-origin"!==n.mode||"GET"!==n.method||"navigate"!==n.mode||e.respondWith(async function(){const c=await caches.open(t),o=new URL(n.url),i=await c.match(n);return i||((t=>{let e=!1;for(const a in routes)a.length>1&&a.slice(0,1)===t&&(e=!0),1===a.length&&1===t.length&&(e=!0);return e})(o.pathname)&&"function"==typeof WritableStream?async function(e,n){n.pathname=/\/index\.html$/.test(n.pathname)?n.pathname.replace(/index.html$/,"index.content.html"):/\/$/.test(n.pathname)?`${n.pathname}index.content.html`:`${n.pathname}/index.content.html`,console.log(n.pathname);const c=[caches.match("/index-top.html"),fetch(n).catch((()=>caches.match("/offline.content.html"))),caches.match("/index-bottom.html")],o=new a;e.waitUntil(async function(){for(const t of c){const e=await t;await e.body.pipeTo(o.writable,{preventClose:!0})}o.writable.getWriter().close()}());const i=await caches.open(t),s=new Response(o.readable,{headers:{"Content-Type":"text/html; charset=utf-8"}});return await i.put(e.request,s.clone()),s}(e,o):void fetch(n).then((t=>(c.put(n,t.clone()),t))).catch((()=>caches.match("/offline.html"))))}())}));
